<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <title>Report Meeting â€“ TranscripTonic</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="../icon.png" />
  <style>
    @import url("https://fonts.googleapis.com/css2?family=SUSE:wght@400;700&display=swap");
    :root { color-scheme: dark; --c-bg:#071f29; --c-panel:#0d2f3f; --c-accent:#2A9ACA; --c-border:#2a9aca40; --c-fg:#c0c0c0; }
    * { box-sizing:border-box; }
    body { margin:0; font-family:"SUSE",system-ui,sans-serif; background:var(--c-bg); color:var(--c-fg); min-height:100vh; display:flex; flex-direction:column; }
    h1 { margin:0; font-size:1.4rem; letter-spacing:.5px; color:#fff; }
    .view { flex:1; display:none; padding:2.2rem clamp(1rem,4vw,3.5rem) 2.5rem; }
    .view.active { display:flex; flex-direction:column; }
    .intro { max-width:880px; margin:0 auto; display:flex; flex-direction:column; gap:1.75rem; }
    .hero-title { font-size:2.1rem; line-height:1.15; background:linear-gradient(90deg,#6ac9ff,#2A9ACA); -webkit-background-clip:text; color:transparent; font-weight:700; letter-spacing:.5px; }
    .subtitle { font-size:.9rem; opacity:.75; max-width:640px; line-height:1.5; }
    .sections-grid { display:grid; gap:.75rem; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); margin-top:.5rem; }
    .check-card { position:relative; border:1px solid #2a9aca2d; background:#0d2f3f; padding:.85rem .8rem .9rem; border-radius:12px; cursor:pointer; display:flex; gap:.55rem; align-items:flex-start; transition:.2s; min-height:82px; }
    .check-card input { position:absolute; opacity:0; pointer-events:none; }
    .check-card:hover { border-color:#2A9ACA; }
    .check-card.active { border-color:#2A9ACA; background:linear-gradient(140deg,#0d2f3f,#104052); box-shadow:0 0 0 1px #2A9ACA55; }
    .check-card span { font-size:.72rem; line-height:1.3; font-weight:600; color:#fff; }
    .add-row { display:flex; gap:.6rem; margin-top:.5rem; }
    .add-row input { flex:1; background:#0d2f3f; border:1px solid var(--c-border); color:#fff; padding:.55rem .65rem; border-radius:8px; font-size:.7rem; }
    .btn { background:var(--c-accent); color:#071f29; border:none; padding:.7rem 1.15rem; font-size:.75rem; font-weight:700; border-radius:10px; cursor:pointer; letter-spacing:.5px; display:inline-flex; align-items:center; gap:.45rem; }
    .btn.secondary { background:#123d4d; color:#6ac9ff; }
    .btn.ghost { background:transparent; color:#6ac9ff; }
    .btn.outline { background:transparent; border:1px solid #2A9ACA; color:#2A9ACA; }
    .btn.small { font-size:.6rem; padding:.4rem .6rem; border-radius:6px; }
    .center-actions { display:flex; flex-wrap:wrap; gap:.75rem; margin-top:.5rem; }
    .pill-tips { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem; }
    .pill { background:#2A9ACA; color:#071f29; padding:2px 10px; font-size:.6rem; font-weight:700; border-radius:20px; letter-spacing:.5px; cursor:pointer; }
    .loading-view { align-items:center; justify-content:center; }
    .spinner { width:54px; height:54px; border:5px solid #0d2f3f; border-top-color:#2A9ACA; border-radius:50%; animation:spin 1s linear infinite; }
    @keyframes spin { to { transform:rotate(360deg);} }
    .loading-text { margin-top:1.2rem; font-size:.8rem; letter-spacing:.5px; opacity:.8; }
    .report-view { max-width:960px; margin:0 auto; display:flex; flex-direction:column; gap:2rem; }
    .report-header { display:flex; justify-content:space-between; gap:1rem; align-items:flex-start; flex-wrap:wrap; }
    .report-title { font-size:1.55rem; font-weight:700; margin:0; color:#6ac9ff; letter-spacing:.5px; }
    .report-actions { display:flex; gap:.6rem; flex-wrap:wrap; }
    .blocks { display:flex; flex-direction:column; gap:1.3rem; }
    .block { background:#0d2f3f; border:1px solid #2a9aca40; padding:1.1rem 1.15rem 1.25rem; border-radius:14px; position:relative; }
    .block h2 { margin:0 0 .65rem; font-size:1rem; color:#6ac9ff; }
    .block .body { font-size:.8rem; line-height:1.5; white-space:pre-wrap; }
    .hint { font-size:.6rem; letter-spacing:.5px; opacity:.6; margin-top:.4rem; }
    .empty-note { font-size:.7rem; opacity:.65; }
    .error-box { background:#4d1212; border:1px solid #ff6b6b55; padding:.8rem .9rem; border-radius:10px; font-size:.7rem; line-height:1.45; }
    @media (max-width:760px){ .sections-grid { grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); } .hero-title{ font-size:1.65rem; } }
    @media print { body{ background:#fff; color:#000; } .view:not(.report-active){ display:none !important; } .report-actions{display:none!important;} .block{ background:#fff; border:1px solid #666; color:#000;} .block h2{ color:#000;} }
  </style>
</head>
<body>
  <!-- VIEW: CONFIG -->
  <section class="view active" id="viewConfig">
    <div class="intro">
      <h1 class="hero-title">Report della Riunione</h1>
      <p class="subtitle" id="meetingSubtitle">Seleziona le sezioni che vuoi generare. Puoi aggiungerne di personalizzate. Poi premi Genera.</p>
      <div id="sectionsGrid" class="sections-grid"></div>
      <div class="add-row">
        <input id="customSection" placeholder="Nuova sezione..." />
        <button class="btn small" id="addCustom">Aggiungi</button>
      </div>
      <div class="center-actions">
        <button class="btn" id="btnGenerate">Genera Report</button>
        <button class="btn ghost" id="btnSelectAll">Seleziona tutto</button>
        <button class="btn ghost" id="btnClear">Reset</button>
      </div>
      <div class="hint" id="status"></div>
    </div>
  </section>

  <!-- VIEW: LOADING -->
  <section class="view loading-view" id="viewLoading">
    <div style="display:flex;flex-direction:column;align-items:center;">
      <div class="spinner"></div>
      <div class="loading-text" id="loadingText">Generazione in corso...</div>
      <div class="hint" style="margin-top:1rem;">Analisi trascrizione + costruzione sezioni</div>
    </div>
  </section>

  <!-- VIEW: REPORT -->
  <section class="view" id="viewReport">
    <div class="report-view">
      <div class="report-header">
        <h2 class="report-title" id="reportTitle">Report</h2>
        <div class="report-actions">
          <button class="btn secondary" id="btnOpenChat">Chat</button>
          <button class="btn secondary" id="btnPrint">PDF</button>
          <button class="btn outline" id="btnRegenera">Rigenera</button>
        </div>
      </div>
      <div id="blocks" class="blocks"></div>
      <div id="reportError"></div>
    </div>
  </section>
  <script type="module" src="./LLM/llm.js"></script>
  <script type="module" src="./report.js"></script>
</body>
</html>
